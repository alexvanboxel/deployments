# Generate by gcr.io/treactor/kpt-fn/gateway-api
apiVersion: v1
kind: ConfigMap
metadata:
  name: envoy
  namespace: foo
  annotations:
    config.kubernetes.io/managed-by: fn:gen:gcr.io/treactor/kpt-fn/gateway-api
data:
  envoy.yaml: |-
    {
      "static_resources":  {
        "listeners":  [
          {
            "name":  "listener_0",
            "address":  {
              "socket_address":  {
                "address":  "0.0.0.0",
                "port_value":  30000
              }
            },
            "filter_chains":  [
              {
                "filters":  [
                  {
                    "name":  "envoy.filters.network.http_connection_manager",
                    "typed_config":  {
                      "@type":  "type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager",
                      "stat_prefix":  "ingress_http",
                      "route_config":  {
                        "name":  "local_route",
                        "virtual_hosts":  [
                          {
                            "name":  "local_service",
                            "domains":  [
                              "*"
                            ],
                            "routes":  [
                              {
                                "match":  {
                                  "path":  "/index.html"
                                },
                                "route":  {
                                  "cluster":  "treactor_ui_80"
                                }
                              },
                              {
                                "match":  {
                                  "path":  "/robot.txt"
                                },
                                "route":  {
                                  "cluster":  "treactor_ui_80"
                                }
                              },
                              {
                                "match":  {
                                  "path":  "/"
                                },
                                "route":  {
                                  "cluster":  "treactor_ui_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/299/info"
                                },
                                "route":  {
                                  "cluster":  "bond_n_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/500/info"
                                },
                                "route":  {
                                  "cluster":  "treactor_ui_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/501/info"
                                },
                                "route":  {
                                  "cluster":  "treactor_api_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/1/info"
                                },
                                "route":  {
                                  "cluster":  "atom_h_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/2/info"
                                },
                                "route":  {
                                  "cluster":  "atom_he_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/3/info"
                                },
                                "route":  {
                                  "cluster":  "atom_li_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/4/info"
                                },
                                "route":  {
                                  "cluster":  "atom_be_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/5/info"
                                },
                                "route":  {
                                  "cluster":  "atom_b_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/6/info"
                                },
                                "route":  {
                                  "cluster":  "atom_c_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/7/info"
                                },
                                "route":  {
                                  "cluster":  "atom_n_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/nodes/8/info"
                                },
                                "route":  {
                                  "cluster":  "atom_o_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/reactions"
                                },
                                "route":  {
                                  "cluster":  "treactor_ui_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/treact/info"
                                },
                                "route":  {
                                  "cluster":  "treactor_api_80"
                                }
                              },
                              {
                                "match":  {
                                  "prefix":  "/static"
                                },
                                "route":  {
                                  "cluster":  "treactor_ui_80"
                                }
                              }
                            ]
                          }
                        ]
                      },
                      "http_filters":  [
                        {
                          "name":  "envoy.filters.http.router",
                          "typed_config":  {
                            "@type":  "type.googleapis.com/envoy.extensions.filters.http.router.v3.Router"
                          }
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          }
        ],
        "clusters":  [
          {
            "name":  "atom_b_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "atom_b_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "atom-b",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "atom_be_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "atom_be_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "atom-be",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "atom_c_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "atom_c_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "atom-c",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "atom_h_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "atom_h_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "atom-h",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "atom_he_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "atom_he_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "atom-he",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "atom_li_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "atom_li_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "atom-li",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "atom_n_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "atom_n_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "atom-n",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "atom_o_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "atom_o_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "atom-o",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "bond_n_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "bond_n_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "bond-n",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "treactor_api_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "treactor_api_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "treactor-api",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          },
          {
            "name":  "treactor_ui_80",
            "type":  "STRICT_DNS",
            "connect_timeout":  "0.250s",
            "load_assignment":  {
              "cluster_name":  "treactor_ui_80",
              "endpoints":  [
                {
                  "lb_endpoints":  [
                    {
                      "endpoint":  {
                        "address":  {
                          "socket_address":  {
                            "address":  "treactor-ui",
                            "port_value":  80
                          }
                        }
                      }
                    }
                  ]
                }
              ]
            }
          }
        ]
      },
      "admin":  {
        "address":  {
          "socket_address":  {
            "address":  "0.0.0.0",
            "port_value":  9901
          }
        }
      }
    }
